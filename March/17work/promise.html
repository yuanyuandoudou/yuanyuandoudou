<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
    //   let pro = new Promise((resolve,reject)=>{
    //       console.log('我是谁')
    //     //   resolve('呵呵')
    //       reject('我是你')
    //   })

    //   pro.then((res)=>{
    //       console.log('怎么',res)
    //   },(err)=>{
    //     console.log('sdf',err)
    //   })

//     function getPage(page){
//     var max = new Promise((resolve,reject)=>{
//         setTimeout(()=>{
//             if(Math.round(Math.random()*10)>5){
//             resolve('匹配成功'+page)
//         }else{
//             reject('匹配失败'+page)
//         }
//     },1000)
//  }) 
//  return max
// }

// getPage(1).then((res)=>{
//     console.log(res)
//     return getPage(2)
// },(err)=>{
//     console.log(err)
//     return getPage(2)
// }).then((res)=>{
//     console.log(res)
//     return getPage(3)
// },(err)=>{
//     console.log(err)
//     return getPage(3)
// }).then((res)=>{
//     console.log(res)
// },(err)=>{
//     console.log(err)
// })
// function getPage(page){
//     var max = new Promise((resolve,reject)=>{
//         setTimeout(()=>{
//             if(Math.round(Math.random()*10)>5){
//             resolve('匹配成功'+page)
//         }else{
//             reject('匹配失败'+page)
//         }
//     },1000)
//  }) 
//  return max
// }

// getPage(1).then((res)=>{
//     console.log(res)
//     return getPage(2)
// }).then((res)=>{
//     console.log(res)
//     return getPage(3)
// }).then((res)=>{
//     console.log(res)
// }).catch((err)=>{
//     console.log(err)
// })

function buy(page){
    var cai = new Promise((resolve,reject)=>{
        setTimeout(()=>{
            resolve('买鸡|步骤'+page)
        },2000)
    })
    return cai
}
function kill(page){
    var chang = new Promise((resolve,reject)=>{
        setTimeout(()=>{
            resolve('杀鸡|步骤'+page)
        },2000)
    })
    return chang
}
function stew(page){
    var mai = new Promise((resolve,reject)=>{
        setTimeout(()=>{
            resolve('炖鸡|步骤'+page)
        },6000)
    })
    return mai
}
function eat(page){
    var cai = new Promise((resolve,reject)=>{
        setTimeout(()=>{
            resolve('吃鸡|步骤'+page)
        },3000)
    })
    return cai
}


buy(1).then(res=>{
    console.log(res)
    return kill(2)
}).then(res=>{
    console.log(res)
    return stew(3)
}).then(res=>{
    console.log(res)
    return eat(4)
}).then(res=>{
    console.log(res)
}).catch(err=>{
    console.log('捕获异常')
}).finally(()=>{
    console.log('鸡已吃完')
})
    </script>
</body>
</html>